(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b4a2238"],{"28b5":function(e,n,t){},"6ebe":function(e,n,t){"use strict";t("28b5")},bbf2:function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},l=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"rtcPlayer"}},[t("video",{staticStyle:{"text-align":"left"},attrs:{id:"webRtcPlayerBox",controls:"",autoplay:""}},[e._v(" Your browser is too old which doesn't support HTML5 video. ")])])}],i=null,c={name:"RtcPlayer",props:["videoUrl","error","hasaudio"],data:function(){return{timer:null}},watch:{videoUrl:function(e,n){this.pause(),this.play(e)},immediate:!0},mounted:function(){var e=this,n=decodeURIComponent(this.$route.params.url);this.$nextTick((function(){"undefined"===typeof e.videoUrl&&(e.videoUrl=n),console.log("初始化时的地址为: "+e.videoUrl),e.play(e.videoUrl)}))},destroyed:function(){clearTimeout(this.timer)},methods:{play:function(e){var n=this;i=new ZLMRTCClient.Endpoint({element:document.getElementById("webRtcPlayerBox"),debug:!0,zlmsdpUrl:e,simulecast:!1,useCamera:!1,audioEnable:!0,videoEnable:!0,recvOnly:!0,usedatachannel:!1}),i.on(ZLMRTCClient.Events.WEBRTC_ICE_CANDIDATE_ERROR,(function(e){console.error("ICE 协商出错"),n.eventcallbacK("ICE ERROR","ICE 协商出错")})),i.on(ZLMRTCClient.Events.WEBRTC_ON_REMOTE_STREAMS,(function(e){console.log("播放成功",e.streams),n.eventcallbacK("playing","播放成功")})),i.on(ZLMRTCClient.Events.WEBRTC_OFFER_ANWSER_EXCHANGE_FAILED,(function(t){console.error("offer anwser 交换失败",t),n.eventcallbacK("OFFER ANSWER ERROR ","offer anwser 交换失败"),-400==t.code&&"流不存在"==t.msg&&(console.log("流不存在"),n.timer=setTimeout((function(){n.webrtcPlayer.close(),n.play(e)}),100))})),i.on(ZLMRTCClient.Events.WEBRTC_ON_LOCAL_STREAM,(function(e){n.eventcallbacK("LOCAL STREAM","获取到了本地流")}))},pause:function(){null!=i&&(i.close(),i=null)},eventcallbacK:function(e,n){console.log("player 事件回调"),console.log(e),console.log(n)}}},r=c,a=(t("6ebe"),t("2877")),s=Object(a["a"])(r,o,l,!1,null,null,null);n["default"]=s.exports}}]);