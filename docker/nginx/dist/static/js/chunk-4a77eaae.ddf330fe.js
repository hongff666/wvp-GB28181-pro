(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a77eaae"],{"165c":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"生成国标编码",width:"65rem",top:"2rem",center:"","append-to-body":!0,"close-on-click-modal":!1,visible:e.showVideoDialog,"destroy-on-close":!1},on:{"update:visible":function(t){e.showVideoDialog=t}}},[a("el-tabs",{staticStyle:{padding:"0 1rem",margin:"auto 0"},on:{"tab-click":e.getRegionList},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[a("el-tab-pane",{attrs:{name:"0"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[0].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[0].meaning))])]),a("el-radio-group",{model:{value:e.allVal[0].val,callback:function(t){e.$set(e.allVal[0],"val",t)},expression:"allVal[0].val"}},e._l(e.regionList,(function(t){return a("el-radio",{key:t.deviceId,staticStyle:{"line-height":"2rem"},attrs:{label:t.deviceId}},[e._v(" "+e._s(t.name)+" - "+e._s(t.deviceId)+" ")])})),1)],1),a("el-tab-pane",{attrs:{name:"1"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[1].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[1].meaning))])]),a("el-radio-group",{attrs:{disabled:e.allVal[1].lock},model:{value:e.allVal[1].val,callback:function(t){e.$set(e.allVal[1],"val",t)},expression:"allVal[1].val"}},e._l(e.regionList,(function(t){return a("el-radio",{key:t.deviceId,staticStyle:{"line-height":"2rem"},attrs:{label:t.deviceId.substring(2)}},[e._v(" "+e._s(t.name)+" - "+e._s(t.deviceId.substring(2))+" ")])})),1)],1),a("el-tab-pane",{attrs:{name:"2"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[2].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[2].meaning))])]),a("el-radio-group",{attrs:{disabled:e.allVal[2].lock},model:{value:e.allVal[2].val,callback:function(t){e.$set(e.allVal[2],"val",t)},expression:"allVal[2].val"}},e._l(e.regionList,(function(t){return a("el-radio",{key:t.deviceId,staticStyle:{"line-height":"2rem"},attrs:{label:t.deviceId.substring(4)}},[e._v(" "+e._s(t.name)+" - "+e._s(t.deviceId.substring(4))+" ")])})),1)],1),a("el-tab-pane",{attrs:{name:"3"}},[e._v(" 请手动输入基层接入单位编码,两位数字 "),a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[3].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[3].meaning))])]),a("el-input",{attrs:{type:"text",placeholder:"请输入内容",maxlength:"2",disabled:e.allVal[3].lock,"show-word-limit":""},model:{value:e.allVal[3].val,callback:function(t){e.$set(e.allVal[3],"val",t)},expression:"allVal[3].val"}})],1),a("el-tab-pane",{attrs:{name:"4"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[4].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[4].meaning))])]),a("el-radio-group",{attrs:{disabled:e.allVal[4].lock},model:{value:e.allVal[4].val,callback:function(t){e.$set(e.allVal[4],"val",t)},expression:"allVal[4].val"}},e._l(e.industryCodeTypeList,(function(t){return a("el-radio",{key:t.code,staticStyle:{"line-height":"2rem"},attrs:{label:t.code}},[e._v(" "+e._s(t.name)+" - "+e._s(t.code)+" ")])})),1)],1),a("el-tab-pane",{attrs:{name:"5"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[5].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[5].meaning))])]),a("el-radio-group",{attrs:{disabled:e.allVal[5].lock},model:{value:e.allVal[5].val,callback:function(t){e.$set(e.allVal[5],"val",t)},expression:"allVal[5].val"}},e._l(e.deviceTypeList,(function(t){return a("el-radio",{key:t.code,staticStyle:{"line-height":"2rem"},attrs:{label:t.code}},[e._v(" "+e._s(t.name)+" - "+e._s(t.code)+" ")])})),1)],1),a("el-tab-pane",{attrs:{name:"6"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[6].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[6].meaning))])]),a("el-radio-group",{attrs:{disabled:e.allVal[6].lock},model:{value:e.allVal[6].val,callback:function(t){e.$set(e.allVal[6],"val",t)},expression:"allVal[6].val"}},e._l(e.networkIdentificationTypeList,(function(t){return a("el-radio",{key:t.code,staticStyle:{"line-height":"2rem"},attrs:{label:t.code}},[e._v(" "+e._s(t.name)+" - "+e._s(t.code)+" ")])})),1)],1),a("el-tab-pane",{attrs:{name:"7"}},[e._v(" 请手动输入设备/用户序号, 六位数字 "),a("div",{attrs:{slot:"label"},slot:"label"},[a("div",{staticClass:"show-code-item"},[e._v(e._s(e.allVal[7].val))]),a("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.allVal[7].meaning))])]),a("el-input",{attrs:{type:"text",placeholder:"请输入内容",maxlength:"6",disabled:e.allVal[7].lock,"show-word-limit":""},model:{value:e.allVal[7].val,callback:function(t){e.$set(e.allVal[7],"val",t)},expression:"allVal[7].val"}})],1)],1),a("el-form",{},[a("el-form-item",{staticStyle:{"margin-top":"22px","margin-bottom":"0"}},[a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("保存")]),a("el-button",{on:{click:e.closeModel}},[e._v("取消")])],1)])],1)],1)},i=[],n=a("a888"),s={directives:{elDragDialog:n["a"]},props:{},data:function(){return{showVideoDialog:!1,activeKey:"0",allVal:[{id:[1,2],meaning:"省级编码",val:"11",type:"中心编码",lock:!1},{id:[3,4],meaning:"市级编码",val:"01",type:"中心编码",lock:!1},{id:[5,6],meaning:"区级编码",val:"01",type:"中心编码",lock:!1},{id:[7,8],meaning:"基层接入单位编码",val:"01",type:"中心编码",lock:!1},{id:[9,10],meaning:"行业编码",val:"00",type:"行业编码",lock:!1},{id:[11,13],meaning:"类型编码",val:"132",type:"类型编码",lock:!1},{id:[14],meaning:"网络标识编码",val:"7",type:"网络标识",lock:!1},{id:[15,20],meaning:"设备/用户序号",val:"000001",type:"序号",lock:!1}],regionList:[],deviceTypeList:[],industryCodeTypeList:[],networkIdentificationTypeList:[],endCallBck:null}},computed:{},methods:{openDialog:function(e,t,a,l){console.log(t),this.showVideoDialog=!0,this.activeKey="0",this.regionList=[],this.getRegionList(),"undefined"!==typeof t&&20===t.length&&(this.allVal[0].val=t.substring(0,2),this.allVal[1].val=t.substring(2,4),this.allVal[2].val=t.substring(4,6),this.allVal[3].val=t.substring(6,8),this.allVal[4].val=t.substring(8,10),this.allVal[5].val=t.substring(10,13),this.allVal[6].val=t.substring(13,14),this.allVal[7].val=t.substring(14)),console.log(this.allVal),"undefined"!==typeof a&&(this.allVal[a].lock=!0,this.allVal[a].val=l),this.endCallBck=e},getRegionList:function(){if("0"===this.activeKey||"1"===this.activeKey||"2"===this.activeKey){var e="";"1"===this.activeKey&&(e=this.allVal[0].val),"2"===this.activeKey&&(e=this.allVal[0].val+this.allVal[1].val),"0"!==this.activeKey&&""===e&&this.$message.error({showClose:!0,message:"请先选择上级行政区划"}),this.queryChildList(e)}else"4"===this.activeKey?(console.log(222),this.queryIndustryCodeList()):"5"===this.activeKey?this.queryDeviceTypeList():"6"===this.activeKey&&this.queryNetworkIdentificationTypeList()},queryChildList:function(e){var t=this;this.regionList=[],this.$store.dispatch("region/queryChildListInBase",e).then((function(e){t.regionList=e})).catch((function(e){t.$message.error({showClose:!0,message:e})}))},queryIndustryCodeList:function(){var e=this;this.industryCodeTypeList=[],this.$store.dispatch("commonChanel/getIndustryList").then((function(t){e.industryCodeTypeList=t})).catch((function(t){e.$message.error({showClose:!0,message:t})}))},queryDeviceTypeList:function(){var e=this;this.deviceTypeList=[],this.$store.dispatch("commonChanel/getTypeList").then((function(t){e.deviceTypeList=t})).catch((function(t){e.$message.error({showClose:!0,message:t})}))},queryNetworkIdentificationTypeList:function(){var e=this;this.networkIdentificationTypeList=[],this.$store.dispatch("commonChanel/getNetworkIdentificationList").then((function(t){e.networkIdentificationTypeList=t})).catch((function(t){e.$message.error({showClose:!0,message:t})}))},closeModel:function(){this.showVideoDialog=!1},handleOk:function(){var e=this.allVal[0].val+this.allVal[1].val+this.allVal[2].val+this.allVal[3].val+this.allVal[4].val+this.allVal[5].val+this.allVal[6].val+this.allVal[7].val;console.log(e),this.endCallBck&&this.endCallBck(e),this.showVideoDialog=!1}}},o=s,c=(a("6c17"),a("2877")),r=Object(c["a"])(o,l,i,!1,null,null,null);t["a"]=r.exports},"5c8c":function(e,t,a){"use strict";a("ee48")},"6c17":function(e,t,a){"use strict";a("92b6")},"92b6":function(e,t,a){},c2c8:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"border-right":"1px solid #EBEEF5",height:"100%"},attrs:{id:"groupTree"}},[a("div",{staticStyle:{padding:"0 20px 0 10px"}},[a("el-input",{attrs:{size:"small","suffix-icon":"el-icon-search",placeholder:"请输入搜索内容",clearable:""},on:{input:e.searchChange},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}})],1),e.searchStr?e._e():a("div",[e.showAlert&&e.edit?a("el-alert",{staticStyle:{"text-align":"left"},attrs:{title:"操作提示",description:"你可以使用右键菜单管理节点",type:"info"}}):e._e(),e.edit?a("div",{staticStyle:{float:"right","margin-right":"24px","margin-top":"18px","font-size":"14px"}},[e._v(" 显示编号： "),a("el-checkbox",{model:{value:e.showCode,callback:function(t){e.showCode=t},expression:"showCode"}})],1):e._e(),a("vue-easy-tree",{ref:"veTree",staticClass:"flow-tree",attrs:{"node-key":"treeId",height:e.treeHeight?e.treeHeight:"78vh",lazy:"",load:e.loadNode,data:e.treeData,props:e.props,"default-expanded-keys":[""]},on:{"node-contextmenu":e.contextmenuEventHandler,"node-click":e.nodeClickHandler},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node;t.data;return[a("span",{staticClass:"custom-tree-node"},[0===l.data.type&&e.chooseId!==l.data.deviceId?a("span",{staticClass:"iconfont icon-bianzubeifen3",staticStyle:{color:"#409EFF"}}):e._e(),0===l.data.type&&e.chooseId===l.data.deviceId?a("span",{staticClass:"iconfont icon-bianzubeifen3",staticStyle:{color:"#c60135"}}):e._e(),1===l.data.type&&"ON"===l.data.status?a("span",{staticClass:"iconfont icon-shexiangtou2",staticStyle:{color:"#409EFF"}}):e._e(),1===l.data.type&&"ON"!==l.data.status?a("span",{staticClass:"iconfont icon-shexiangtou2",staticStyle:{color:"#808181"}}):e._e(),""!==l.data.deviceId&&e.showCode?a("span",{staticStyle:{"padding-left":"1px"},attrs:{title:l.data.deviceId}},[e._v(e._s(l.label)+"（编号："+e._s(l.data.deviceId)+"）")]):e._e(),""!==l.data.deviceId&&e.showCode?e._e():a("span",{staticStyle:{"padding-left":"1px"},attrs:{title:l.data.deviceId}},[e._v(e._s(l.label))])])]}}],null,!1,2458661970)})],1),e.searchStr?a("div",{staticStyle:{color:"#606266",height:"calc(100% - 32px)",overflow:"auto !important"}},[e.groupList.length>0?a("ul",{staticStyle:{"list-style":"none",margin:"0",padding:"10px"}},e._l(e.groupList,(function(t){return a("li",{key:t.id,staticClass:"channel-list-li",staticStyle:{height:"26px","align-items":"center",cursor:"pointer"},on:{click:function(a){return e.listClickHandler(t)}}},[e.chooseId!==t.deviceId?a("span",{staticClass:"iconfont icon-bianzubeifen3",staticStyle:{color:"#409EFF","font-size":"20px"}}):e._e(),e.chooseId===t.deviceId?a("span",{staticClass:"iconfont icon-bianzubeifen3",staticStyle:{color:"#c60135","font-size":"20px"}}):e._e(),a("div",[a("div",{staticStyle:{"margin-left":"4px","margin-bottom":"3px","font-size":"15px"}},[e._v(e._s(t.name))]),a("div",{staticStyle:{"margin-left":"4px","font-size":"13px",color:"#808181"}},[e._v(e._s(t.deviceId))])])])})),0):e._e(),e.channelList.length>0?a("ul",{staticStyle:{"list-style":"none",margin:"0",padding:"10px",overflow:"auto"}},e._l(e.channelList,(function(t){return a("li",{key:t.id,staticClass:"channel-list-li",on:{click:function(a){return e.channelLstClickHandler(t)}}},["ON"===t.gbStatus?a("span",{staticClass:"iconfont icon-shexiangtou2",staticStyle:{color:"#409EFF","font-size":"20px"}}):e._e(),"ON"!==t.gbStatus?a("span",{staticClass:"iconfont icon-shexiangtou2",staticStyle:{color:"#808181","font-size":"20px"}}):e._e(),a("div",[a("div",{staticStyle:{"margin-left":"4px","margin-bottom":"3px","font-size":"15px"}},[e._v(e._s(t.gbName))]),a("div",{staticStyle:{"margin-left":"4px","font-size":"13px",color:"#808181"}},[e._v(e._s(t.gbDeviceId))])])])})),0):e._e(),this.currentPage*this.count<this.total?a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"text"},on:{click:e.loadListMore}},[e._v("加载更多")])],1):e._e()]):e._e(),a("groupEdit",{ref:"groupEdit"}),a("gbDeviceSelect",{ref:"gbDeviceSelect"}),a("gbChannelSelect",{ref:"gbChannelSelect",attrs:{"data-type":"group"}})],1)},i=[],n=(a("99af"),a("d3b7"),a("9331")),s=a.n(n),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"groupEdit"}},[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"分组编辑",width:"40%",top:"2rem","append-to-body":!0,"close-on-click-modal":!1,visible:e.showDialog,"destroy-on-close":!0},on:{"update:visible":function(t){e.showDialog=t},close:function(t){return e.close()}}},[a("div",{staticStyle:{"margin-top":"1rem","margin-right":"100px"},attrs:{id:"shared"}},[a("el-form",{ref:"form",attrs:{model:e.group,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"节点编号",prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入编码"},model:{value:e.group.deviceId,callback:function(t){e.$set(e.group,"deviceId",t)},expression:"group.deviceId"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.buildDeviceIdCode(e.group.deviceId)}},slot:"append"},[e._v("生成")])],1)],1),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.group.name,callback:function(t){e.$set(e.group,"name",t)},expression:"group.name"}})],1),a("el-form-item",{attrs:{label:"行政区划",prop:"name"}},[a("el-input",{model:{value:e.group.civilCode,callback:function(t){e.$set(e.group,"civilCode",t)},expression:"group.civilCode"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){return e.buildCivilCode(e.group.civilCode)}},slot:"append"},[e._v("选择")])],1)],1),a("el-form-item",[a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")]),a("el-button",{on:{click:e.close}},[e._v("取消")])],1)])],1)],1)]),a("channelCode",{ref:"channelCode"}),a("chooseCivilCode",{ref:"chooseCivilCode"})],1)},c=[],r=a("165c"),d=a("363b"),u=a("a888"),h={name:"GroupEdit",directives:{elDragDialog:u["a"]},components:{ChooseCivilCode:d["a"],channelCode:r["a"]},props:[],data:function(){return{submitCallback:null,showDialog:!1,loading:!1,level:0,group:{id:0,deviceId:"",name:"",parentDeviceId:"",businessGroup:"",civilCode:"",platformId:""}}},computed:{},created:function(){},methods:{openDialog:function(e,t){console.log(e),e&&(this.group=e),this.showDialog=!0,this.submitCallback=t},onSubmit:function(){var e=this;this.group.id?this.$store.dispatch("group/update",this.group).then((function(t){e.$message.success({showClose:!0,message:"保存成功"}),e.submitCallback&&e.submitCallback(e.group)})).catch((function(t){e.$message({showClose:!0,message:t,type:"error"})})):this.$store.dispatch("group/add",this.group).then((function(t){e.$message.success({showClose:!0,message:"保存成功"}),e.submitCallback&&e.submitCallback(e.group),e.close()})).catch((function(t){e.$message({showClose:!0,message:t,type:"error"})}))},buildDeviceIdCode:function(e){var t=this;console.log(this.group);var a=this.group.businessGroup?"216":"215";this.$refs.channelCode.openDialog((function(e){t.group.deviceId=e}),e,5,a)},buildCivilCode:function(e){var t=this;this.$refs.chooseCivilCode.openDialog((function(e){t.group.civilCode=e}))},close:function(){this.showDialog=!1,console.log(this.group)}}},v=h,p=a("2877"),g=Object(p["a"])(v,o,c,!1,null,null,null),f=g.exports,m=a("7d41"),b=a("1322"),y={name:"DeviceTree",components:{GbChannelSelect:b["a"],VueEasyTree:s.a,groupEdit:f,gbDeviceSelect:m["a"]},props:["edit","enableAddChannel","showHeader","hasChannel","addChannelToGroup","treeHeight"],data:function(){return{props:{label:"name",id:"treeId"},showCode:!1,showAlert:!0,searchStr:"",chooseId:"",treeData:[],currentPage:1|this.defaultPage,count:15|this.defaultCount,total:0,groupList:[],channelList:[]}},created:function(){},destroyed:function(){},methods:{searchChange:function(){this.currentPage=1,this.total=0,this.edit?(this.groupList=[],this.queryGroup()):(this.channelList=[],this.queryChannelList())},loadListMore:function(){this.currentPage+=1,this.edit?this.queryGroup():this.queryChannelList()},queryGroup:function(){var e=this;this.$store.dispatch("group/queryTree",{query:this.searchStr,page:this.currentPage,count:this.count}).then((function(t){e.total=t.total,e.groupList=e.groupList.concat(t.list)}))},queryChannelList:function(){var e=this;this.$store.dispatch("commonChanel/getList",{page:this.currentPage,count:this.count,query:this.searchStr}).then((function(t){e.total=t.total,e.channelList=e.channelList.concat(t.list)}))},loadNode:function(e,t){var a=this;if(0===e.level)t([{treeId:"",deviceId:"",name:"根资源组",isLeaf:!1,type:0}]);else{if(e.data.leaf)return void t([]);this.$store.dispatch("group/getTreeList",{query:this.searchStr,parent:e.data.id,hasChannel:this.hasChannel}).then((function(e){e.length>0&&(a.showAlert=!1),t(e)})).finally((function(){a.locading=!1}))}},reset:function(){this.$forceUpdate()},contextmenuEventHandler:function(e,t,a,l){var i=this;if(this.edit){if(0===a.data.type){var n=[{label:"刷新节点",icon:"el-icon-refresh",disabled:!1,onClick:function(){i.refreshNode(a)}},{label:"新建节点",icon:"el-icon-plus",disabled:!1,onClick:function(){i.addGroup(t.id,a)}},{label:"编辑节点",icon:"el-icon-edit",disabled:1===a.level,onClick:function(){i.editGroup(t,a)}},{label:"删除节点",icon:"el-icon-delete",disabled:1===a.level,divided:!0,onClick:function(){i.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.removeGroup(t.id,a)})).catch((function(){}))}}];this.enableAddChannel&&(n.push({label:"添加设备",icon:"el-icon-plus",disabled:a.level<=2,onClick:function(){i.addChannelFormDevice(t.id,a)}}),n.push({label:"移除设备",icon:"el-icon-delete",disabled:a.level<=2,divided:!0,onClick:function(){i.removeChannelFormDevice(t.id,a)}}),n.push({label:"添加通道",icon:"el-icon-plus",disabled:a.level<=2,onClick:function(){i.addChannel(t.id,a)}})),this.$contextmenu({items:n,event:e,customClass:"custom-class",zIndex:3e3})}return!1}},removeGroup:function(e,t){var a=this;this.$store.dispatch("group/deleteGroup",t.data.id).then((function(e){t.parent.loaded=!1,t.parent.expand(),a.$emit("onChannelChange",t.data.deviceId)}))},addChannelFormDevice:function(e,t){var a=this;this.$refs.gbDeviceSelect.openDialog((function(e){for(var l=[],i=0;i<e.length;i++)l.push(e[i].id);a.$store.dispatch("commonChanel/addDeviceToGroup",{parentId:t.data.deviceId,businessGroup:t.data.businessGroup,deviceIds:l}).then((function(e){a.$message.success({showClose:!0,message:"保存成功"}),a.$emit("onChannelChange",t.data.deviceId),t.loaded=!1,t.expand()})).finally((function(){a.loading=!1}))}))},removeChannelFormDevice:function(e,t){var a=this;this.$refs.gbDeviceSelect.openDialog((function(e){for(var l=[],i=0;i<e.length;i++)l.push(e[i].id);a.$store.dispatch("commonChanel/deleteDeviceFromGroup",l).then((function(e){a.$message.success({showClose:!0,message:"保存成功"}),a.$emit("onChannelChange",t.data.deviceId),t.loaded=!1,t.expand()})).finally((function(){a.loading=!1}))}))},addChannel:function(e,t){var a=this;this.$refs.gbChannelSelect.openDialog((function(e){console.log("选择的数据"),console.log(e),a.addChannelToGroup(t.data.deviceId,t.data.businessGroup,e)}))},refreshNode:function(e){console.log(e),e.loaded=!1,e.expand()},refresh:function(e){console.log("刷新节点： "+e);var t=this.$refs.veTree.getNode(e);t&&(t.loaded=!1,t.expand())},addGroup:function(e,t){this.$refs.groupEdit.openDialog({id:0,name:"",deviceId:"",civilCode:"",parentDeviceId:t.level>2?t.data.deviceId:"",parentId:t.data.id,businessGroup:t.level>2?t.data.businessGroup:t.data.deviceId},(function(e){console.log(t),t.loaded=!1,t.expand()}),e)},editGroup:function(e,t){console.log(t),this.$refs.groupEdit.openDialog(t.data,(function(e){console.log(t),t.parent.loaded=!1,t.parent.expand()}),e)},nodeClickHandler:function(e,t,a){this.chooseId=e.deviceId,this.$emit("clickEvent",e)},listClickHandler:function(e){this.chooseId=e.deviceId,this.$emit("clickEvent",e)},channelLstClickHandler:function(e){this.$emit("clickEvent",{leaf:!0,id:e.gbId})}}},C=y,_=(a("5c8c"),Object(p["a"])(C,l,i,!1,null,null,null));t["a"]=_.exports},ee48:function(e,t,a){}}]);