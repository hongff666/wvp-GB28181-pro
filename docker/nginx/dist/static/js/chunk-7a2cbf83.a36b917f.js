(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a2cbf83","chunk-b3c5ace6","chunk-3b4a2238"],{2655:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticStyle:{width:"100%",height:"100%","background-color":"#000000",margin:"0 auto",position:"relative"},on:{dblclick:e.fullscreenSwich}},[i("div",{staticStyle:{width:"100%","padding-top":"56.25%",position:"relative"}}),i("div",{staticClass:"buttons-box",attrs:{id:"buttonsBox"}},[i("div",{staticClass:"buttons-box-left"},[e.playing?e._e():i("i",{staticClass:"iconfont icon-play jessibuca-btn",on:{click:e.playBtnClick}}),e.playing?i("i",{staticClass:"iconfont icon-pause jessibuca-btn",on:{click:e.pause}}):e._e(),i("i",{staticClass:"iconfont icon-stop jessibuca-btn",on:{click:e.destroy}}),e.isNotMute?i("i",{staticClass:"iconfont icon-audio-high jessibuca-btn",on:{click:function(t){return e.mute()}}}):e._e(),e.isNotMute?e._e():i("i",{staticClass:"iconfont icon-audio-mute jessibuca-btn",on:{click:function(t){return e.cancelMute()}}})]),i("div",{staticClass:"buttons-box-right"},[i("span",{staticClass:"jessibuca-btn"},[e._v(e._s(e.kBps)+" kb/s")]),i("i",{staticClass:"iconfont icon-camera1196054easyiconnet jessibuca-btn",staticStyle:{"font-size":"1rem !important"},on:{click:e.screenshot}}),i("i",{staticClass:"iconfont icon-shuaxin11 jessibuca-btn",on:{click:e.playBtnClick}}),e.fullscreen?e._e():i("i",{staticClass:"iconfont icon-weibiaoti10 jessibuca-btn",on:{click:e.fullscreenSwich}}),e.fullscreen?i("i",{staticClass:"iconfont icon-weibiaoti11 jessibuca-btn",on:{click:e.fullscreenSwich}}):e._e()])])])},o=[],s=i("5530"),a={},l={name:"Jessibuca",props:["videoUrl","error","hasAudio","height"],data:function(){return{playing:!1,isNotMute:!1,quieting:!1,fullscreen:!1,loaded:!1,speed:0,performance:"",kBps:0,btnDom:null,videoInfo:null,volume:1,rotate:0,vod:!0,forceNoOffscreen:!1}},watch:{videoUrl:{handler:function(e,t){var i=this;this.$nextTick((function(){i.play(e)}))},immediate:!0}},created:function(){var e=this,t=decodeURIComponent(this.$route.params.url);this.$nextTick((function(){e.updatePlayerDomSize(),window.onresize=e.updatePlayerDomSize,"undefined"===typeof e.videoUrl&&(e.videoUrl=t),e.btnDom=document.getElementById("buttonsBox")}))},mounted:function(){this.updatePlayerDomSize()},destroyed:function(){a[this._uid]&&a[this._uid].destroy(),this.playing=!1,this.loaded=!1,this.performance=""},methods:{updatePlayerDomSize:function(){var e=this,t=this.$refs.container;this.parentNodeResizeObserver||(this.parentNodeResizeObserver=new ResizeObserver((function(t){e.updatePlayerDomSize()})),this.parentNodeResizeObserver.observe(t.parentNode));var i=t.parentNode.clientWidth,n=t.parentNode.clientHeight,o=i,s=9/16*o;n>0&&i>n/9*16&&(s=n,o=n/9*16);var l=Math.min(document.body.clientHeight,document.documentElement.clientHeight);s>l&&(s=l,o=16/9*s),this.playerWidth=o,this.playerHeight=s,this.playing&&a[this._uid].resize(this.playerWidth,this.playerHeight)},create:function(){var e={container:this.$refs.container,autoWasm:!0,background:"",controlAutoHide:!1,debug:!1,decoder:"static/js/jessibuca/decoder.js",forceNoOffscreen:!1,hasAudio:"undefined"===typeof this.hasAudio||this.hasAudio,heartTimeout:5,heartTimeoutReplay:!0,heartTimeoutReplayTimes:3,hiddenAutoPause:!1,hotKey:!0,isFlv:!1,isFullResize:!1,isNotMute:this.isNotMute,isResize:!0,keepScreenOn:!0,loadingText:"请稍等, 视频加载中......",loadingTimeout:10,loadingTimeoutReplay:!0,loadingTimeoutReplayTimes:3,openWebglAlignment:!1,operateBtns:{fullscreen:!1,screenshot:!1,play:!1,audio:!1,record:!1},recordType:"mp4",rotate:0,showBandwidth:!1,supportDblclickFullscreen:!1,timeout:10,useMSE:!0,useWCS:!1,useWebFullScreen:!0,videoBuffer:.1,wasmDecodeErrorReplay:!0,wcsUseVideoRender:!0};console.log("Jessibuca -> options: ",e),a[this._uid]=new window.Jessibuca(Object(s["a"])({},e));var t=a[this._uid],i=this;t.on("pause",(function(){i.playing=!1})),t.on("play",(function(){i.playing=!0})),t.on("fullscreen",(function(e){i.fullscreen=e})),t.on("mute",(function(e){i.isNotMute=!e})),t.on("performance",(function(e){var t="卡顿";2===e?t="非常流畅":1===e&&(t="流畅"),i.performance=t})),t.on("kBps",(function(e){i.kBps=Math.round(e)})),t.on("videoInfo",(function(e){console.log("Jessibuca -> videoInfo: ",e)})),t.on("audioInfo",(function(e){console.log("Jessibuca -> audioInfo: ",e)})),t.on("error",(function(e){console.log("Jessibuca -> error: ",e)})),t.on("timeout",(function(e){console.log("Jessibuca -> timeout: ",e)})),t.on("loadingTimeout",(function(e){console.log("Jessibuca -> timeout: ",e)})),t.on("delayTimeout",(function(e){console.log("Jessibuca -> timeout: ",e)})),t.on("playToRenderTimes",(function(e){console.log("Jessibuca -> playToRenderTimes: ",e)}))},playBtnClick:function(e){this.play(this.videoUrl)},play:function(e){var t=this;console.log("Jessibuca -> url: ",e),a[this._uid]&&this.destroy(),this.create(),a[this._uid].on("play",(function(){t.playing=!0,t.loaded=!0,t.quieting=jessibuca.quieting})),a[this._uid].hasLoaded()?a[this._uid].play(e):a[this._uid].on("load",(function(){a[t._uid].play(e)}))},pause:function(){a[this._uid]&&a[this._uid].pause(),this.playing=!1,this.err="",this.performance=""},screenshot:function(){a[this._uid]&&a[this._uid].screenshot()},mute:function(){a[this._uid]&&a[this._uid].mute()},cancelMute:function(){a[this._uid]&&a[this._uid].cancelMute()},destroy:function(){a[this._uid]&&a[this._uid].destroy(),null==document.getElementById("buttonsBox")&&this.$refs.container.appendChild(this.btnDom),a[this._uid]=null,this.playing=!1,this.err="",this.performance=""},fullscreenSwich:function(){var e=this.isFullscreen();a[this._uid].setFullscreen(!e),this.fullscreen=!e},isFullscreen:function(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||!1}}},c=l,r=(i("989a"),i("2877")),u=Object(r["a"])(c,n,o,!1,null,null,null);t["default"]=u.exports},"28b5":function(e,t,i){},3031:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mediaInfo"}},[i("el-button",{staticStyle:{position:"absolute",right:"1rem"},attrs:{icon:"el-icon-refresh-right",circle:"",size:"mini"},on:{click:e.getMediaInfo}}),i("el-descriptions",{attrs:{size:"mini",column:3,title:"概况"}},[i("el-descriptions-item",{attrs:{label:"观看人数"}},[e._v(e._s(e.info.readerCount))]),i("el-descriptions-item",{attrs:{label:"网络"}},[e._v(e._s(e.formatByteSpeed()))]),i("el-descriptions-item",{attrs:{label:"持续时间"}},[e._v(e._s(e.info.aliveSecond)+"秒")])],1),i("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr"}},[e.info.videoCodec?i("el-descriptions",{attrs:{size:"mini",column:2,title:"视频信息"}},[i("el-descriptions-item",{attrs:{label:"编码"}},[e._v(e._s(e.info.videoCodec))]),i("el-descriptions-item",{attrs:{label:"分辨率"}},[e._v(e._s(e.info.width)+"x"+e._s(e.info.height)+" ")]),i("el-descriptions-item",{attrs:{label:"FPS"}},[e._v(e._s(e.info.fps))]),i("el-descriptions-item",{attrs:{label:"丢包率"}},[e._v(e._s(e.info.loss))])],1):e._e(),e.info.audioCodec?i("el-descriptions",{attrs:{size:"mini",column:2,title:"音频信息"}},[i("el-descriptions-item",{attrs:{label:"编码"}},[e._v(" "+e._s(e.info.audioCodec)+" ")]),i("el-descriptions-item",{attrs:{label:"采样率"}},[e._v(e._s(e.info.audioSampleRate))])],1):e._e()],1)],1)},o=[],s=(i("99af"),i("b680"),{name:"MediaInfo",components:{},props:["app","stream","mediaServerId"],data:function(){return{info:{},task:null}},created:function(){this.getMediaInfo()},methods:{getMediaInfo:function(){var e=this;this.$store.dispatch("server/getMediaInfo",{app:this.app,stream:this.stream,mediaServerId:this.mediaServerId}).then((function(t){e.info=t}))},startTask:function(){this.task=setInterval(this.getMediaInfo,1e3)},stopTask:function(){this.task&&(window.clearInterval(this.task),this.task=null)},formatByteSpeed:function(){var e=this.info.bytesSpeed,t=1024;return e<t?e+" B/S":e<Math.pow(t,2)?(e/t).toFixed(2)+" KB/S":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+" MB/S":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+" G/S":(e/Math.pow(t,4)).toFixed(2)+" T/S"},formatAliveSecond:function(){var e=this.info.aliveSecond,t=parseInt(e.value/3600),i=parseInt(e.value/60%60),n=Math.ceil(e.value%60),o=t<10?"0"+t:t,s=n>59?59:n;return"".concat(o>0?"".concat(o,"小时"):"").concat(i<10?"0"+i:i,"分").concat(s<10?"0"+s:s,"秒")}}}),a=s,l=(i("5869"),i("2877")),c=Object(l["a"])(a,n,o,!1,null,null,null);t["a"]=c.exports},"4f91":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticStyle:{"background-color":"#000000"},attrs:{id:"h265Player"},on:{dblclick:e.fullscreenSwich}},[i("div",{ref:"playerBox",staticStyle:{width:"100%",height:"100%",margin:"0 auto"},attrs:{id:"glplayer"}}),e.playerLoading?i("div",{staticClass:"player-loading"},[i("i",{staticClass:"el-icon-loading"}),i("span",[e._v("视频加载中")])]):e._e(),e.showButton?i("div",{staticClass:"buttons-box",attrs:{id:"buttonsBox"}},[i("div",{staticClass:"buttons-box-left"},[e.playing?e._e():i("i",{staticClass:"iconfont icon-play h265web-btn",on:{click:e.unPause}}),e.playing?i("i",{staticClass:"iconfont icon-pause h265web-btn",on:{click:e.pause}}):e._e(),i("i",{staticClass:"iconfont icon-stop h265web-btn",on:{click:e.destroy}}),e.isNotMute?i("i",{staticClass:"iconfont icon-audio-high h265web-btn",on:{click:function(t){return e.mute()}}}):e._e(),e.isNotMute?e._e():i("i",{staticClass:"iconfont icon-audio-mute h265web-btn",on:{click:function(t){return e.cancelMute()}}})]),i("div",{staticClass:"buttons-box-right"},[i("i",{staticClass:"iconfont icon-camera1196054easyiconnet h265web-btn",staticStyle:{"font-size":"1rem !important"},on:{click:e.screenshot}}),i("i",{staticClass:"iconfont icon-shuaxin11 h265web-btn",on:{click:e.playBtnClick}}),e.fullscreen?e._e():i("i",{staticClass:"iconfont icon-weibiaoti10 h265web-btn",on:{click:e.fullscreenSwich}}),e.fullscreen?i("i",{staticClass:"iconfont icon-weibiaoti11 h265web-btn",on:{click:e.fullscreenSwich}}):e._e()])]):e._e()])},o=[],s=(i("ac1f"),i("5319"),{}),a="base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1",l={name:"H265web",props:["videoUrl","error","hasAudio","height","showButton"],data:function(){return{playing:!1,isNotMute:!1,quieting:!1,fullscreen:!1,loaded:!1,speed:0,kBps:0,btnDom:null,videoInfo:null,volume:1,rotate:0,vod:!0,forceNoOffscreen:!1,playerWidth:0,playerHeight:0,inited:!1,playerLoading:!1,mediaInfo:null}},watch:{videoUrl:function(e,t){this.play(e)},playing:function(e,t){this.$emit("playStatusChange",e)},immediate:!0},mounted:function(){var e=this,t=decodeURIComponent(this.$route.params.url);window.onresize=function(){e.updatePlayerDomSize()},this.btnDom=document.getElementById("buttonsBox"),console.log("初始化时的地址为: "+t),t&&this.play(this.videoUrl)},destroyed:function(){s[this._uid]&&s[this._uid].destroy(),this.playing=!1,this.loaded=!1,this.playerLoading=!1},methods:{updatePlayerDomSize:function(){var e=this,t=this.$refs.container;this.parentNodeResizeObserver||(this.parentNodeResizeObserver=new ResizeObserver((function(t){e.updatePlayerDomSize()})),this.parentNodeResizeObserver.observe(t.parentNode));var i=t.parentNode.clientWidth,n=t.parentNode.clientHeight,o=i,a=9/16*o;n>0&&i>n/9*16&&(a=n,o=n/9*16);var l=Math.min(document.body.clientHeight,document.documentElement.clientHeight);a>l&&(a=l,o=16/9*a),this.$refs.playerBox.style.width=o+"px",this.$refs.playerBox.style.height=a+"px",this.playerWidth=o,this.playerHeight=a,this.playing&&s[this._uid].resize(this.playerWidth,this.playerHeight)},resize:function(e,t){this.playerWidth=e,this.playerHeight=t,this.$refs.playerBox.style.width=e+"px",this.$refs.playerBox.style.height=t+"px",this.playing&&s[this._uid].resize(this.playerWidth,this.playerHeight)},create:function(e){var t=this;this.playerLoading=!0;var i={};s[this._uid]=new window.new265webjs(e,Object.assign({player:"glplayer",width:this.playerWidth,height:this.playerHeight,token:a,extInfo:{coreProbePart:.4,probeSize:8192,ignoreAudio:null==this.hasAudio||this.hasAudio?0:1}},i));var n=s[this._uid];n.onOpenFullScreen=function(){t.fullscreen=!0},n.onCloseFullScreen=function(){t.fullscreen=!1},n.onReadyShowDone=function(){var e=n.play();t.playing=e,t.playerLoading=!1},n.onLoadFinish=function(){t.loaded=!0,t.mediaInfo=n.mediaInfo()},n.onPlayTime=function(e){t.$emit("playTimeChange",e)},n.do()},screenshot:function(){if(s[this._uid]){var e=document.createElement("canvas");console.log(this.mediaInfo),e.width=this.mediaInfo.meta.size.width,e.height=this.mediaInfo.meta.size.height,s[this._uid].snapshot(e);var t=document.createElement("a");t.download="screenshot.png",t.href=e.toDataURL("image/png").replace("image/png","image/octet-stream"),t.click()}},playBtnClick:function(e){this.play(this.videoUrl)},play:function(e){var t=this;if(s[this._uid]&&this.destroy(),e)return 0===this.playerWidth||0===this.playerHeight?(this.updatePlayerDomSize(),void setTimeout((function(){t.play(e)}),300)):void this.create(e)},unPause:function(){s[this._uid]&&(s[this._uid].play(),this.playing=s[this._uid].isPlaying()),this.err=""},pause:function(){s[this._uid]&&(s[this._uid].pause(),this.playing=s[this._uid].isPlaying()),this.err=""},mute:function(){s[this._uid]&&(s[this._uid].setVoice(0),this.isNotMute=!1)},cancelMute:function(){s[this._uid]&&(s[this._uid].setVoice(1),this.isNotMute=!0)},destroy:function(){s[this._uid]&&s[this._uid].release(),s[this._uid]=null,this.playing=!1,this.err=""},fullscreenSwich:function(){var e=this.isFullscreen();e?s[this._uid].closeFullScreen():s[this._uid].fullScreen(),this.fullscreen=!e},isFullscreen:function(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||!1},setPlaybackRate:function(e){s[this._uid].setPlaybackRate(e)}}},c=l,r=(i("7e1d"),i("2877")),u=Object(r["a"])(c,n,o,!1,null,null,null);t["a"]=u.exports},5869:function(e,t,i){"use strict";i("e0ad")},"6ebe":function(e,t,i){"use strict";i("28b5")},"7e1d":function(e,t,i){"use strict";i("da93")},"953f":function(e,t,i){},"989a":function(e,t,i){"use strict";i("953f")},bbf2:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"rtcPlayer"}},[i("video",{staticStyle:{"text-align":"left"},attrs:{id:"webRtcPlayerBox",controls:"",autoplay:""}},[e._v(" Your browser is too old which doesn't support HTML5 video. ")])])}],s=null,a={name:"RtcPlayer",props:["videoUrl","error","hasaudio"],data:function(){return{timer:null}},watch:{videoUrl:function(e,t){this.pause(),this.play(e)},immediate:!0},mounted:function(){var e=this,t=decodeURIComponent(this.$route.params.url);this.$nextTick((function(){"undefined"===typeof e.videoUrl&&(e.videoUrl=t),console.log("初始化时的地址为: "+e.videoUrl),e.play(e.videoUrl)}))},destroyed:function(){clearTimeout(this.timer)},methods:{play:function(e){var t=this;s=new ZLMRTCClient.Endpoint({element:document.getElementById("webRtcPlayerBox"),debug:!0,zlmsdpUrl:e,simulecast:!1,useCamera:!1,audioEnable:!0,videoEnable:!0,recvOnly:!0,usedatachannel:!1}),s.on(ZLMRTCClient.Events.WEBRTC_ICE_CANDIDATE_ERROR,(function(e){console.error("ICE 协商出错"),t.eventcallbacK("ICE ERROR","ICE 协商出错")})),s.on(ZLMRTCClient.Events.WEBRTC_ON_REMOTE_STREAMS,(function(e){console.log("播放成功",e.streams),t.eventcallbacK("playing","播放成功")})),s.on(ZLMRTCClient.Events.WEBRTC_OFFER_ANWSER_EXCHANGE_FAILED,(function(i){console.error("offer anwser 交换失败",i),t.eventcallbacK("OFFER ANSWER ERROR ","offer anwser 交换失败"),-400==i.code&&"流不存在"==i.msg&&(console.log("流不存在"),t.timer=setTimeout((function(){t.webrtcPlayer.close(),t.play(e)}),100))})),s.on(ZLMRTCClient.Events.WEBRTC_ON_LOCAL_STREAM,(function(e){t.eventcallbacK("LOCAL STREAM","获取到了本地流")}))},pause:function(){null!=s&&(s.close(),s=null)},eventcallbacK:function(e,t){console.log("player 事件回调"),console.log(e),console.log(t)}}},l=a,c=(i("6ebe"),i("2877")),r=Object(c["a"])(l,n,o,!1,null,null,null);t["default"]=r.exports},da93:function(e,t,i){},e0ad:function(e,t,i){}}]);