(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e135d4c"],{"0299":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"chooseDateTimeRange"}},[i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"选择时间段",width:"500px",top:"5rem","append-to-body":!0,"close-on-click-modal":!1,visible:e.showDialog,"destroy-on-close":!0},on:{"update:visible":function(t){e.showDialog=t},close:function(t){return e.close()}}},[i("div",{staticStyle:{width:"fit-content",margin:"0 auto"}},[i("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.close}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")])],1)])],1)},n=[],a={name:"ChooseDateTimeRange",props:{},data:function(){return{showDialog:!1,endCallback:null,timeRange:"",businessGroup:""}},computed:{},created:function(){},methods:{openDialog:function(e,t){console.log(e),e&&(this.timeRange=e),this.showDialog=!0,this.endCallback=t},onSubmit:function(){this.endCallback&&this.endCallback(this.timeRange),this.close()},close:function(){this.timeRange="",this.showDialog=!1,this.endCallback=null}}},s=a,l=(i("e8d7"),i("2877")),r=Object(l["a"])(s,o,n,!1,null,null,null);t["a"]=r.exports},1148:function(e,t,i){"use strict";var o=i("a691"),n=i("1d80");e.exports="".repeat||function(e){var t=String(n(this)),i="",a=o(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},"408a":function(e,t,i){var o=i("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=o(e))throw TypeError("Incorrect invocation");return+e}},"4e43":function(e,t,i){},"8c08":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container",attrs:{id:"DeviceRecord"}},[i("div",{style:e.boxStyle},[i("div",[this.$route.query.mediaServerId?i("div",{staticClass:"page-header-btn",staticStyle:{"padding-right":"1rem"}},[i("b",[e._v("节点：")]),e._v(" "+e._s(e.mediaServerId)+" ")]):e._e(),this.$route.params.mediaServerId?i("div",[i("span",[e._v("流媒体："+e._s(this.$route.params.mediaServerId))])]):e._e(),i("div",{staticClass:"record-list-box-box"},[e.showSidebar?i("div",[i("el-date-picker",{staticStyle:{width:"190px"},attrs:{size:"mini","picker-options":e.pickerOptions,type:"date","value-format":"yyyy-MM-dd",placeholder:"日期"},on:{change:function(t){return e.dateChange()}},model:{value:e.chooseDate,callback:function(t){e.chooseDate=t},expression:"chooseDate"}})],1):e._e(),i("div",{staticClass:"record-list-box",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"}},[e.detailFiles.length>0?i("ul",{staticClass:"infinite-list record-list"},e._l(e.detailFiles,(function(t,o){return i("li",{key:o,staticClass:"infinite-list-item record-list-item"},[e.chooseFileIndex!==o?i("el-tag",{staticStyle:{"background-color":"#ecf5ff",color:"#017690"},on:{click:function(t){return e.chooseFile(o)}}},[i("i",{staticClass:"el-icon-video-camera"}),e._v(" "+e._s(e.getFileShowName(t))+" ")]):e._e(),e.chooseFileIndex===o?i("el-tag",{attrs:{type:"danger"}},[i("i",{staticClass:"el-icon-video-camera"}),e._v(" "+e._s(e.getFileShowName(t))+" ")]):e._e(),i("a",{staticClass:"el-icon-download",staticStyle:{color:"#409EFF","font-weight":"600","margin-left":"10px"},attrs:{target:"_blank"},on:{click:function(i){return e.downloadFile(t)}}})],1)})),0):e._e(),0===e.detailFiles.length?i("div",{staticClass:"record-list-no-val"},[e._v("暂无数据")]):e._e()])])]),i("div",{attrs:{id:"playerBox"}},[i("div",{staticClass:"playBox",staticStyle:{height:"calc(100% - 90px)",width:"100%","background-color":"#000000"}},[e.playLoading?i("div",{staticStyle:{position:"relative",left:"calc(50% - 32px)",top:"43%","z-index":"100",color:"#fff",float:"left","text-align":"center"}},[i("div",{staticClass:"el-icon-loading"}),i("div",{staticStyle:{width:"100%","line-height":"2rem"}},[e._v("正在加载")])]):e._e(),i("h265web",{ref:"recordVideoPlayer",attrs:{"video-url":e.videoUrl,height:"calc(100vh - 250px)","show-button":!1,"has-audio":!0},on:{playStatusChange:e.playingChange,playTimeChange:e.showPlayTimeChange}})],1),i("div",{staticClass:"player-option-box"},[i("VideoTimeline",{ref:"Timeline",attrs:{"init-time":e.initTime,"time-segments":e.timeSegments,"init-zoom-index":4},on:{timeChange:e.playTimeChange,mousedown:e.timelineMouseDown,mouseup:e.mouseupTimeline}}),e.showTime?i("div",{staticClass:"time-line-show"},[e._v(e._s(e.showTimeValue))]):e._e()],1),i("div",{staticStyle:{height:"40px","background-color":"#383838",display:"grid","grid-template-columns":"1fr 400px 1fr"}},[i("div",{staticStyle:{"text-align":"left"}},[i("div",{staticClass:"record-play-control",staticStyle:{"background-color":"transparent","box-shadow":"0 0 10px transparent"}},[i("a",{staticClass:"record-play-control-item iconfont icon-list",attrs:{target:"_blank",title:"列表"},on:{click:function(t){return e.sidebarControl()}}}),i("a",{staticClass:"record-play-control-item iconfont icon-camera1196054easyiconnet",attrs:{target:"_blank",title:"截图"},on:{click:function(t){return e.snap()}}}),i("a",{staticClass:"record-play-control-item iconfont icon-xiazai1",attrs:{target:"_blank",title:"下载录像"},on:{click:function(t){return e.chooseTimeForRecord()}}})])]),i("div",{staticStyle:{"text-align":"center"}},[i("div",{staticClass:"record-play-control"},[e.chooseFileIndex>0?i("a",{staticClass:"record-play-control-item iconfont icon-diyigeshipin",attrs:{target:"_blank",title:"上一个"},on:{click:function(t){return e.playLast()}}}):i("a",{staticClass:"record-play-control-item iconfont icon-diyigeshipin",staticStyle:{color:"#acacac",cursor:"not-allowed"},attrs:{target:"_blank",title:"上一个"}}),i("a",{staticClass:"record-play-control-item iconfont icon-kuaijin",attrs:{target:"_blank",title:"快退五秒"},on:{click:function(t){return e.seekBackward()}}}),i("a",{staticClass:"record-play-control-item iconfont icon-stop1",staticStyle:{"font-size":"14px"},attrs:{target:"_blank",title:"停止"},on:{click:function(t){return e.stopPLay()}}}),e.playing?i("a",{staticClass:"record-play-control-item iconfont icon-zanting",attrs:{target:"_blank",title:"暂停"},on:{click:function(t){return e.pausePlay()}}}):e._e(),e.playing?e._e():i("a",{staticClass:"record-play-control-item iconfont icon-kaishi",attrs:{target:"_blank",title:"播放"},on:{click:function(t){return e.play()}}}),i("a",{staticClass:"record-play-control-item iconfont icon-houtui",attrs:{target:"_blank",title:"快进五秒"},on:{click:function(t){return e.seekForward()}}}),e.chooseFileIndex<e.detailFiles.length-1?i("a",{staticClass:"record-play-control-item iconfont icon-zuihouyigeshipin",attrs:{target:"_blank",title:"下一个"},on:{click:function(t){return e.playNext()}}}):i("a",{staticClass:"record-play-control-item iconfont icon-zuihouyigeshipin",staticStyle:{color:"#acacac",cursor:"not-allowed"},attrs:{target:"_blank",title:"下一个"},on:{click:function(t){return e.playNext()}}}),i("el-dropdown",{on:{command:e.changePlaySpeed}},[i("a",{staticClass:"record-play-control-item record-play-control-speed",attrs:{target:"_blank",title:"倍速播放"}},[e._v(e._s(e.playSpeed)+"X")]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.playSpeedRange,(function(t){return i("el-dropdown-item",{key:t,attrs:{command:t}},[e._v(e._s(t)+"X ")])})),1)],1)],1)]),i("div",{staticStyle:{"text-align":"right"}},[i("div",{staticClass:"record-play-control",staticStyle:{"background-color":"transparent","box-shadow":"0 0 10px transparent"}},[e.isFullScreen?i("a",{staticClass:"record-play-control-item iconfont icon-suoxiao1",attrs:{target:"_blank",title:"全屏"},on:{click:function(t){return e.fullScreen()}}}):i("a",{staticClass:"record-play-control-item iconfont icon-fangdazhanshi",attrs:{target:"_blank",title:"全屏"},on:{click:function(t){return e.fullScreen()}}})])])])])]),i("record-download",{ref:"recordDownload"}),i("chooseTimeRange",{ref:"chooseTimeRange"})],1)},n=[],a=(i("d3b7"),i("0643"),i("4e3e"),i("159b"),i("4f91")),s=i("76f0"),l=i("e2fa"),r=i("0299"),c=i("c1df"),d=i.n(c),h=i("93bf"),u=i.n(h),p={name:"DeviceRecord",components:{h265web:a["a"],VideoTimeline:s["a"],recordDownload:l["a"],ChooseTimeRange:r["a"]},data:function(){var e=this;return{showSidebar:!1,deviceId:this.$route.params.deviceId,channelId:this.$route.params.channelDeviceId,mediaServerId:null,dateFilesObj:[],mediaServerList:[],detailFiles:[],videoUrl:null,streamInfo:null,loading:!1,chooseDate:null,playTime:null,playerTime:0,playSpeed:1,chooseFileIndex:null,queryDate:new Date,currentPage:1,count:1e6,total:0,playLoading:!1,showTime:!0,isFullScreen:!1,playSeekValue:0,playing:!1,taskTimeRange:[],timeFormat:"00:00:00",initTime:null,timelineControl:!1,showOtherSpeed:!0,timeSegments:[],pickerOptions:{cellClassName:function(t){var i=d()(t).format("YYYY-MM-DD");return e.dateFilesObj[i]?"data-picker-true":"data-picker-false"}},playSpeedRange:[.25,.5,1,2,4]}},computed:{boxStyle:function(){return this.showSidebar?{display:"grid",gridTemplateColumns:"210px minmax(0, 1fr)"}:{display:"grid",gridTemplateColumns:"0 minmax(0, 1fr)"}},showTimeValue:function(){return d()(this.playTime).format("YYYY-MM-DD HH:mm:ss")},startTime:function(){return this.chooseDate+" 00:00:00"},endTime:function(){return this.chooseDate+" 23:59:59"}},mounted:function(){this.chooseDate=d()().format("YYYY-MM-DD"),this.dateChange(),this.getDownloadSpeedArray(),window.addEventListener("beforeunload",this.stopPlayRecord)},destroyed:function(){this.$destroy("recordVideoPlayer"),window.removeEventListener("beforeunload",this.stopPlayRecord)},methods:{sidebarControl:function(){this.showSidebar=!this.showSidebar},snap:function(){this.$refs.recordVideoPlayer.screenshot()},chooseTimeForRecord:function(){var e=this,t=this.startTime,i=this.endTime;this.detailFiles.length>0&&(t=this.detailFiles[0].startTime,i=this.detailFiles[this.detailFiles.length-1].endTime),console.log(t),console.log(i),this.$refs.chooseTimeRange.openDialog([new Date(t),new Date(i)],(function(t){console.log(t);var i=d()(t[0]).format("YYYY-MM-DD HH:mm:ss"),o=d()(t[1]).format("YYYY-MM-DD HH:mm:ss");e.downloadFile({startTime:i,endTime:o})}))},playLast:function(){0!==this.chooseFileIndex&&this.chooseFile(this.chooseFileIndex-1)},playNext:function(){this.chooseFileIndex!==this.detailFiles.length-1&&this.chooseFile(this.chooseFileIndex+1)},changePlaySpeed:function(e){var t=this;console.log(this.streamInfo),console.log(e),this.playSpeed=e,this.$store.dispatch("playback/setSpeed",[this.streamInfo.stream,e]).then((function(e){t.$refs.recordVideoPlayer.setPlaybackRate(t.playSpeed)})).catch((function(e){console.log(e)}))},seekBackward:function(){this.playSeekValue-=5e3,this.play()},seekForward:function(){this.playSeekValue+=5e3,this.play()},stopPLay:function(){this.$refs.recordVideoPlayer.destroy()},pausePlay:function(){this.$refs.recordVideoPlayer.pause()},play:function(){this.$refs.recordVideoPlayer.loaded?this.$refs.recordVideoPlayer.unPause():this.playRecord(this.showTimeValue,this.endTime)},fullScreen:function(){var e=this;if(this.isFullScreen)return u.a.exit(),void(this.isFullScreen=!1);var t=this.$refs.recordVideoPlayer.playerWidth,i=this.$refs.recordVideoPlayer.playerHeight;u.a.request(document.getElementById("playerBox")),u.a.on("change",(function(o){e.$refs.recordVideoPlayer.resize(t,i),e.isFullScreen=u.a.isFullscreen})),this.isFullScreen=!0},dateChange:function(){var e=this;this.detailFiles=[],this.$store.dispatch("gbRecord/query",[this.deviceId,this.channelId,this.startTime,this.endTime]).then((function(t){if(0!==t.recordList.length){e.detailFiles=t.recordList,e.initTime=new Date(e.detailFiles[0].startTime).getTime(),console.log(e.initTime);for(var i=0;i<e.detailFiles.length;i++)e.timeSegments.push({beginTime:new Date(e.detailFiles[i].startTime).getTime(),endTime:new Date(e.detailFiles[i].endTime).getTime(),color:"#017690",startRatio:.7,endRatio:.85,index:i})}})).finally((function(){e.recordsLoading=!1}))},getDownloadSpeedArray:function(){var e=this;this.$store.dispatch("device/queryChannelOne",{deviceId:this.deviceId,channelDeviceId:this.channelId}).then((function(t){if(t.downloadSpeed){var i=t.downloadSpeed.split("/");i.forEach((function(t){parseInt(t)>4&&e.playSpeedRange.push(parseInt(t))}))}}))},stopPlayRecord:function(e){var t=this;console.log("停止录像回放"),null!==this.streamInfo?(this.$refs["recordVideoPlayer"].pause(),this.videoUrl="",this.$store.dispatch("playback/stop",[this.deviceId,this.channelId,this.streamInfo.stream]).then((function(i){t.streamInfo=null,e&&e()}))):e&&e()},chooseFile:function(e){this.chooseFileIndex=e;var t=this.detailFiles[this.chooseFileIndex];this.playTime=new Date(t.startTime).getTime(),this.playRecord(t.startTime,this.endTime)},playRecord:function(e,t){var i=this;null!==this.streamInfo?this.stopPlayRecord((function(){i.playRecord(e,t)})):(this.playerTime=0,this.$store.dispatch("playback/play",[this.deviceId,this.channelId,e,t]).then((function(e){i.streamInfo=e,i.videoUrl=i.getUrlByStreamInfo(),i.hasAudio=i.streamInfo.tracks&&i.streamInfo.tracks.length>1})))},getUrlByStreamInfo:function(){return"https:"===location.protocol?this.videoUrl=this.streamInfo["wss_flv"]:this.videoUrl=this.streamInfo["ws_flv"],this.videoUrl},downloadFile:function(e){var t=this;if(!e){var i=d()(new Date(this.chooseDate+" 00:00:00").getTime()+1e3*this.playTime[0]).format("YYYY-MM-DD HH:mm:ss"),o=d()(new Date(this.chooseDate+" 00:00:00").getTime()+1e3*this.playTime[1]).format("YYYY-MM-DD HH:mm:ss");e={startTime:i,endTime:o}}if(null!==this.streamInfo)this.stopPlayRecord((function(){t.downloadFile(e)}));else{var n=this.$loading({lock:!0,text:"正在请求录像",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$store.dispatch("gbRecord/startDownLoad",[this.deviceId,this.channelId,e.startTime,e.endTime,this.playSpeedRange[this.playSpeedRange.length-1]]).then((function(e){t.$refs.recordDownload.openDialog(t.deviceId,t.channelId,e.app,e.stream,e.mediaServerId)})).finally((function(){n.close()}))}},getFileShowName:function(e){return d()(e.startTime).format("HH:mm:ss")+"-"+d()(e.endTime).format("HH:mm:ss")},showPlayTimeChange:function(e){this.playTime+=1e3*e-this.playerTime,this.playerTime=1e3*e},playingChange:function(e){this.playing=e},playTimeChange:function(e){e!==this.playTime&&(this.playTime=e)},timelineMouseDown:function(){this.timelineControl=!0},mouseupTimeline:function(e){this.timelineControl?(this.timelineControl=!1,this.playRecord(this.showTimeValue,this.endTime)):this.timelineControl=!1}}},m=p,f=(i("df99"),i("2877")),g=Object(f["a"])(m,o,n,!1,null,null,null);t["default"]=g.exports},a888:function(e,t,i){"use strict";i("99af"),i("caad"),i("ac1f"),i("2532"),i("5319");var o={bind:function(e,t,i){var o=e.querySelector(".el-dialog__header"),n=e.querySelector(".el-dialog");o.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var a=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();o.onmousedown=function(e){var t=e.clientX-o.offsetLeft,s=e.clientY-o.offsetTop,l=n.offsetWidth,r=n.offsetHeight,c=document.body.clientWidth,d=document.body.clientHeight,h=n.offsetLeft,u=c-n.offsetLeft-l,p=n.offsetTop,m=d-n.offsetTop-r,f=a(n,"left"),g=a(n,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var o=e.clientX-t,a=e.clientY-s;-o>h?o=-h:o>u&&(o=u),-a>p?a=-p:a>m&&(a=m),n.style.cssText+=";left:".concat(o+f,"px;top:").concat(a+g,"px;"),i.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},n=function(e){e.directive("el-drag-dialog",o)};window.Vue&&(window["el-drag-dialog"]=o,Vue.use(n)),o.install=n;t["a"]=o},b680:function(e,t,i){"use strict";var o=i("23e7"),n=i("a691"),a=i("408a"),s=i("1148"),l=i("d039"),r=1..toFixed,c=Math.floor,d=function(e,t,i){return 0===t?i:t%2===1?d(e,t-1,i*e):d(e*e,t/2,i)},h=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},u=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){r.call({})}));o({target:"Number",proto:!0,forced:u},{toFixed:function(e){var t,i,o,l,r=a(this),u=n(e),p=[0,0,0,0,0,0],m="",f="0",g=function(e,t){var i=-1,o=t;while(++i<6)o+=e*p[i],p[i]=o%1e7,o=c(o/1e7)},y=function(e){var t=6,i=0;while(--t>=0)i+=p[t],p[t]=c(i/e),i=i%e*1e7},v=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var i=String(p[e]);t=""===t?i:t+s.call("0",7-i.length)+i}return t};if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(m="-",r=-r),r>1e-21)if(t=h(r*d(2,69,1))-69,i=t<0?r*d(2,-t,1):r/d(2,t,1),i*=4503599627370496,t=52-t,t>0){g(0,i),o=u;while(o>=7)g(1e7,0),o-=7;g(d(10,o,1),0),o=t-1;while(o>=23)y(1<<23),o-=23;y(1<<o),g(1,1),y(2),f=v()}else g(0,i),g(1<<-t,0),f=v()+s.call("0",u);return u>0?(l=f.length,f=m+(l<=u?"0."+s.call("0",u-l)+f:f.slice(0,l-u)+"."+f.slice(l-u))):f=m+f,f}})},df99:function(e,t,i){"use strict";i("f47f")},e2fa:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"recordDownload"}},[e.showDialog?i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.title,width:"45rem","append-to-body":!0,"close-on-click-modal":!1,visible:e.showDialog,"destroy-on-close":!0,center:""},on:{"update:visible":function(t){e.showDialog=t},close:function(t){return e.close()}}},[i("div",{staticStyle:{display:"grid","grid-template-columns":"auto 70px"}},[i("div",[i("el-progress",{staticStyle:{height:"28px","line-height":"25px"},attrs:{percentage:e.percentage}})],1),i("div",[e.downloadFile?i("el-button",{attrs:{icon:"el-icon-download",size:"mini",title:"点击下载"},on:{click:function(t){return e.downloadFileClientEvent()}}},[e._v("下载")]):e._e()],1)])]):e._e()],1)},n=[],a=(i("b680"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("bf19"),i("9861"),i("a888")),s={name:"RecordDownload",directives:{elDragDialog:a["a"]},data:function(){return{title:"下载中...",deviceId:"",channelId:"",app:"",stream:"",mediaServerId:"",showDialog:!1,scale:1,percentage:0,streamInfo:null,taskId:null,getProgressRun:!1,timer:null,downloadFile:null}},created:function(){window.addEventListener("beforeunload",this.stopDownloadRecord)},destroyed:function(){window.removeEventListener("beforeunload",this.stopDownloadRecord)},methods:{openDialog:function(e,t,i,o,n){this.deviceId=e,this.channelId=t,this.app=i,this.stream=o,this.mediaServerId=n,this.showDialog=!0,this.getProgressRun=!0,this.percentage=0,this.downloadFile=null,this.getProgressTimer()},getProgressTimer:function(){var e=this;this.getProgressRun&&(this.downloadFile||setTimeout((function(){e.showDialog&&e.getProgress(e.getProgressTimer)}),5e3))},getProgress:function(e){var t=this;this.$store.dispatch("gbRecord/queryDownloadProgress",[this.deviceId,this.channelId,this.stream]).then((function(i){t.streamInfo=i,1===parseFloat(i.progress)?t.percentage=100:t.percentage=parseFloat((100*parseFloat(i.progress)).toFixed(1)),i.downLoadFilePath&&("https:"===location.protocol?t.downloadFile=i.downLoadFilePath.httpsPath:t.downloadFile=i.downLoadFilePath.httpPath,t.percentage=100,t.getProgressRun=!1,t.downloadFileClientEvent()),e&&e()}))},close:function(){this.streamInfo.progress<1&&this.stopDownloadRecord(),null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.showDialog=!1,this.getProgressRun=!1},gbScale:function(e){this.scale=e},stopDownloadRecord:function(e){this.deviceId&&this.channelId&&this.stream&&this.$axios({method:"get",url:"/api/gb_record/download/stop/"+this.deviceId+"/"+this.channelId+"/"+this.stream}).then((function(t){e&&e(t)}))},downloadFileClientEvent:function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.downloadFile,!0),t.responseType="blob",t.onload=function(i){var o=window.URL.createObjectURL(t.response),n=document.createElement("a");n.href=o,n.download=e.deviceId+"-"+e.channelId+".mp4",n.click()},t.send()}}},l=s,r=i("2877"),c=Object(r["a"])(l,o,n,!1,null,null,null);t["a"]=c.exports},e8d7:function(e,t,i){"use strict";i("4e43")},f47f:function(e,t,i){}}]);